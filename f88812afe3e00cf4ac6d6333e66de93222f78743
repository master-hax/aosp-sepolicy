{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a3a1840e_eeb46920",
        "filename": "private/crosvm.te",
        "patchSetId": 2
      },
      "lineNbr": 105,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2024-04-24T08:24:52Z",
      "side": 1,
      "message": "How are audio_service and audioserver_service differ?",
      "range": {
        "startLine": 102,
        "startChar": 0,
        "endLine": 105,
        "endChar": 56
      },
      "revId": "f88812afe3e00cf4ac6d6333e66de93222f78743",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28b8c1b4_cac86da9",
        "filename": "private/crosvm.te",
        "patchSetId": 2
      },
      "lineNbr": 105,
      "author": {
        "id": 1956136
      },
      "writtenOn": "2024-04-30T10:17:12Z",
      "side": 1,
      "message": "The original added policies is generated by audit2allow.\nSome of them are not necessary for playing sound.\nI did some research about this.\n\nThe `audio_service` is for [`audio`](https://cs.android.com/android/platform/superproject/main/+/main:system/sepolicy/private/service_contexts;l\u003d190), which is `android.media.IAudioService`. This library is above the JNI and used to adjust volume. I don\u0027t know when aaudio will need to call this. But deleting it doesn\u0027t affect sound player. So I think we don\u0027t need this?\n\nThe `audioserver_service` is the core service of the Android audio system including [`media.aaudio`](https://cs.android.com/android/platform/superproject/main/+/main:system/sepolicy/private/service_contexts;l\u003d309), And `media.aaudio` `find` is referenced at [libaaudio](https://cs.android.com/android/platform/superproject/main/+/main:frameworks/av/media/libaaudio/src/binding/AAudioBinderClient.cpp;l\u003d79;drc\u003d5f787816584d6639aead15725ac89c933787df2f)\n\nThe `audioserver` is the [here](https://cs.android.com/android/platform/superproject/main/+/main:frameworks/av/media/audioserver/;l\u003d1?q\u003dframeworks%2Fav%2Fmedia%2Faudioserver%2F\u0026sq\u003d\u0026ss\u003dandroid%2Fplatform%2Fsuperproject%2Fmain). It launches all the service in `audioserver_service` includeing `aaudio` [here](https://cs.android.com/android/platform/superproject/main/+/main:frameworks/av/media/audioserver/main_audioserver.cpp)\n\nIn summary, If I\u0027m understanding right, leaving only this three lines is enough.",
      "parentUuid": "a3a1840e_eeb46920",
      "range": {
        "startLine": 102,
        "startChar": 0,
        "endLine": 105,
        "endChar": 56
      },
      "revId": "f88812afe3e00cf4ac6d6333e66de93222f78743",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49cfcc78_f48a01fd",
        "filename": "private/crosvm.te",
        "patchSetId": 2
      },
      "lineNbr": 106,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2024-04-24T08:24:52Z",
      "side": 1,
      "message": "What is this for? What role does it play when playing sound?",
      "range": {
        "startLine": 106,
        "startChar": 15,
        "endLine": 106,
        "endChar": 27
      },
      "revId": "f88812afe3e00cf4ac6d6333e66de93222f78743",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd008b5f_06f127df",
        "filename": "private/crosvm.te",
        "patchSetId": 2
      },
      "lineNbr": 106,
      "author": {
        "id": 1956136
      },
      "writtenOn": "2024-04-30T10:17:12Z",
      "side": 1,
      "message": "AAudio uses media.metrics. But I found that sound can still be played without these two lines (But with some selinux denined error). So I think we don\u0027t need this?",
      "parentUuid": "49cfcc78_f48a01fd",
      "range": {
        "startLine": 106,
        "startChar": 15,
        "endLine": 106,
        "endChar": 27
      },
      "revId": "f88812afe3e00cf4ac6d6333e66de93222f78743",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}