{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "46066f0b_5da2a4ae",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-07-09T23:21:54Z",
      "side": 1,
      "message": "Can you add a bug?",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 9,
        "endChar": 16
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22e32597_c237b8c4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1955350
      },
      "writtenOn": "2024-07-10T01:14:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "46066f0b_5da2a4ae",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 9,
        "endChar": 16
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96e877d8_6679d377",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-07-09T23:21:54Z",
      "side": 1,
      "message": "Please don\u0027t add \"cherry picked from\" and \"Merged-In\" until you actually land that change.",
      "range": {
        "startLine": 10,
        "startChar": 0,
        "endLine": 10,
        "endChar": 121
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "07e58a04_274b48d9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1955350
      },
      "writtenOn": "2024-07-10T01:14:16Z",
      "side": 1,
      "message": "Done. Sorry, was an artifact of using the cherry-pick tool.",
      "parentUuid": "96e877d8_6679d377",
      "range": {
        "startLine": 10,
        "startChar": 0,
        "endLine": 10,
        "endChar": 121
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae5518fd_ad82a7bb",
        "filename": "private/surfaceflinger.te",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-07-09T23:21:54Z",
      "side": 1,
      "message": "appdomain seems broad. Can you elaborate?",
      "range": {
        "startLine": 89,
        "startChar": 21,
        "endLine": 89,
        "endChar": 30
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c968d8ae_6d51293c",
        "filename": "private/surfaceflinger.te",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1955350
      },
      "writtenOn": "2024-07-10T01:14:16Z",
      "side": 1,
      "message": "I\u0027m implementing an optimization in the IPC between SurfaceFlinger and apps used to release graphic buffers. Any app that uses BLAST Buffer Queue (which is most apps) needs to be able to send Unix sockets to SurfaceFlinger and SurfaceFlinger needs to be able write to those sockets. Is `appdomain` the appropriate domain for this?",
      "parentUuid": "ae5518fd_ad82a7bb",
      "range": {
        "startLine": 89,
        "startChar": 21,
        "endLine": 89,
        "endChar": 30
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "832cf219_7e7c185c",
        "filename": "private/surfaceflinger.te",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-07-10T22:45:51Z",
      "side": 1,
      "message": "It should probably be `appdomain -isolated_app_all -ephemeral_app -sdk_sandbox_all` or `appdomain -isolated_app_all` depending on usage.\n\nIs this socket interface fuzzed?",
      "parentUuid": "c968d8ae_6d51293c",
      "range": {
        "startLine": 89,
        "startChar": 21,
        "endLine": 89,
        "endChar": 30
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33a2ebcd_2c01f3a5",
        "filename": "private/surfaceflinger.te",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1955350
      },
      "writtenOn": "2024-07-10T23:15:05Z",
      "side": 1,
      "message": "Thanks Steven, I\u0027ll read up on those and update the CL. \n\nWhat precisely do you mean by fuzzed in this context? Are you asking from a security perspective? SurfaceFlinger doesn\u0027t ever read from the sockets. Once the socket is set up, messages flow from SurfaceFlinger to the app processes.",
      "parentUuid": "832cf219_7e7c185c",
      "range": {
        "startLine": 89,
        "startChar": 21,
        "endLine": 89,
        "endChar": 30
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "70f382a1_5266f08d",
        "filename": "private/surfaceflinger.te",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-07-10T23:42:34Z",
      "side": 1,
      "message": "And what is this socket used anyway? any reason not to use binder?",
      "parentUuid": "832cf219_7e7c185c",
      "range": {
        "startLine": 89,
        "startChar": 21,
        "endLine": 89,
        "endChar": 30
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1186bfe9_e72139b0",
        "filename": "private/surfaceflinger.te",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-07-10T23:48:32Z",
      "side": 1,
      "message": "\u003e SurfaceFlinger doesn\u0027t ever read from the sockets. \n\nWhy does it need the \u0027read\u0027 permission?",
      "parentUuid": "70f382a1_5266f08d",
      "range": {
        "startLine": 89,
        "startChar": 21,
        "endLine": 89,
        "endChar": 30
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0486555_7f55c7e2",
        "filename": "private/surfaceflinger.te",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1955350
      },
      "writtenOn": "2024-07-10T23:59:30Z",
      "side": 1,
      "message": "See go/blast-buffer-release-optimization for the purpose of the socket. I thought I needed read for SurfaceFlinger to be able to receive the socket over binder. I\u0027ll double check that.",
      "parentUuid": "1186bfe9_e72139b0",
      "range": {
        "startLine": 89,
        "startChar": 21,
        "endLine": 89,
        "endChar": 30
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e796bcc2_56f004eb",
        "filename": "private/surfaceflinger.te",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1955350
      },
      "writtenOn": "2024-07-16T20:47:35Z",
      "side": 1,
      "message": "I haven\u0027t found a way to avoid giving SurfaceFlinger read permissions. Using \"shutdown\" to close the socket for reading doesn\u0027t change anything. Pipes are not feasible because I need to send file descriptors over the unix socket.\n\nThere\u0027s precedent for adding read / write permissions for Unix sockets. System server\u0027s policy includes \n\n```\nallow system_server appdomain:{ fifo_file unix_stream_socket } { getattr read write };\n```\n\nand SurfaceFlinger\u0027s policy includes\n\n```\nallow surfaceflinger system_server:unix_stream_socket { read write };\n```",
      "parentUuid": "b0486555_7f55c7e2",
      "range": {
        "startLine": 89,
        "startChar": 21,
        "endLine": 89,
        "endChar": 30
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4777e513_53d2d3c7",
        "filename": "private/surfaceflinger.te",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-07-18T23:51:53Z",
      "side": 1,
      "message": "b/353597444 is filed to follow up.",
      "parentUuid": "e796bcc2_56f004eb",
      "range": {
        "startLine": 89,
        "startChar": 21,
        "endLine": 89,
        "endChar": 30
      },
      "revId": "ff5e96417db36059ebad7aca9527e6fb07201ca5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}