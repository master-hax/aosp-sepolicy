{
  "comments": [
    {
      "key": {
        "uuid": "2289f6af_28185681",
        "filename": "private/compat/26.0/26.0.ignore.cil",
        "patchSetId": 8
      },
      "lineNbr": 125,
      "author": {
        "id": 1124693
      },
      "writtenOn": "2018-11-07T23:49:07Z",
      "side": 1,
      "message": "You only need to make changes to 28.0.ignore.cil. Revert changes to 27.0.ignore.cil and 26.0.ignore.cil.",
      "range": {
        "startLine": 125,
        "startChar": 4,
        "endLine": 125,
        "endChar": 17
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "797e732e_358a3443",
        "filename": "private/compat/26.0/26.0.ignore.cil",
        "patchSetId": 8
      },
      "lineNbr": 125,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2018-11-08T10:40:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2289f6af_28185681",
      "range": {
        "startLine": 125,
        "startChar": 4,
        "endLine": 125,
        "endChar": 17
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f97d70f9_1ec61355",
        "filename": "private/heapprofd.te",
        "patchSetId": 8
      },
      "lineNbr": 23,
      "author": {
        "id": 1124693
      },
      "writtenOn": "2018-11-07T23:49:07Z",
      "side": 1,
      "message": "fyi, not all executables have exec_type attribute, e.g. /system/bin/iptables",
      "range": {
        "startLine": 23,
        "startChar": 18,
        "endLine": 23,
        "endChar": 27
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d5b5a84_d5a7ca95",
        "filename": "private/heapprofd.te",
        "patchSetId": 8
      },
      "lineNbr": 23,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2018-11-08T10:40:21Z",
      "side": 1,
      "message": "What does \"exec_type\" mean exactly then? Is there some better attribute I want to allow here?",
      "parentUuid": "f97d70f9_1ec61355",
      "range": {
        "startLine": 23,
        "startChar": 18,
        "endLine": 23,
        "endChar": 27
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97444d30_c469b2d6",
        "filename": "private/heapprofd.te",
        "patchSetId": 8
      },
      "lineNbr": 23,
      "author": {
        "id": 1124693
      },
      "writtenOn": "2018-11-09T01:08:19Z",
      "side": 1,
      "message": "\"exec_type\" is used for domain entry points. \nhttps://android.googlesource.com/platform/system/sepolicy/+/master/public/attributes#27\nIf a binary is not used for domain transitions, it doesn\u0027t have to have \"exec_type\" attribute. \n\nIt seems to me the only foolproof way to have access to all binaries on the device is to use \"file_type\" attribute (if security team is OK with that).",
      "parentUuid": "3d5b5a84_d5a7ca95",
      "range": {
        "startLine": 23,
        "startChar": 18,
        "endLine": 23,
        "endChar": 27
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0efd7fad_3caf1580",
        "filename": "private/heapprofd.te",
        "patchSetId": 8
      },
      "lineNbr": 27,
      "author": {
        "id": 1124693
      },
      "writtenOn": "2018-11-07T23:49:07Z",
      "side": 1,
      "message": "You might want to use vendor_file_type instead.",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 27,
        "endChar": 52
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee7c5f55_669f8df7",
        "filename": "private/heapprofd.te",
        "patchSetId": 8
      },
      "lineNbr": 27,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2018-11-08T10:40:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0efd7fad_3caf1580",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 27,
        "endChar": 52
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7664e5f4_97967280",
        "filename": "public/domain.te",
        "patchSetId": 8
      },
      "lineNbr": 998,
      "author": {
        "id": 1124693
      },
      "writtenOn": "2018-11-07T23:49:07Z",
      "side": 1,
      "message": "Two main concerns I have:\n1. We talked offline: you brought up the possibility of doing more work in the security context of heapprofd\u0027s client. So, for example, heapprofd needs to look at /vendor/lib/libfoo, which is used by vendor process foo. Can foo get what\u0027s needed from the lib and pass it to heapprofd? That way these neverallow exemptions are not needed. \n\n2. If you commit to a design that\u0027s userdebug only, it\u0027ll be extremely difficult to scale to user builds without architectural changes. So if you want to run heapprofd in the wild eventually, you might as well get that to work now.",
      "range": {
        "startLine": 998,
        "startChar": 0,
        "endLine": 998,
        "endChar": 38
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d9746df_c9815c14",
        "filename": "public/domain.te",
        "patchSetId": 8
      },
      "lineNbr": 998,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2018-11-07T23:59:37Z",
      "side": 1,
      "message": "1. No, that\u0027s only for the fork model which we will use for user builds. We cannot use that for userdebug as it does not scale to profile multiple processes at once, which people like EngProd or platform developers will want to do.\n\nReinterating and summarizing the discussion for posterity here, on userdebug libheapprofd_client.so (part of the platform) is loaded by libc.so (platform the platform), which communicates to heapprofd (part of the platform). heapprofd reads the process\u0027 /proc/self/maps that it gets passed over the socket, and then libunwindstack uses information in the ELF files of the executable itself and the libraries it might have mounted.\n\nWhat is the reason that it accessing the files for that reason is a concern? I do not see any API here which might be a problem for updatability.\n\n2. The separate daemon is userdebug only. On user, we will fork and use the target processes\u0027 security domain. This is worse for many reasons, but the best we can do while maintaining the  necessary security on user builds. So these rules are inherently userdebug only.",
      "parentUuid": "7664e5f4_97967280",
      "range": {
        "startLine": 998,
        "startChar": 0,
        "endLine": 998,
        "endChar": 38
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "564b2568_2c87a7ae",
        "filename": "public/domain.te",
        "patchSetId": 8
      },
      "lineNbr": 998,
      "author": {
        "id": 1124693
      },
      "writtenOn": "2018-11-08T00:21:07Z",
      "side": 1,
      "message": "1. It\u0027s all userdebug, so I don\u0027t think there is a problem from updatability perspective.\n2. Ack",
      "parentUuid": "4d9746df_c9815c14",
      "range": {
        "startLine": 998,
        "startChar": 0,
        "endLine": 998,
        "endChar": 38
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0cce6e3c_7186e1d4",
        "filename": "public/domain.te",
        "patchSetId": 8
      },
      "lineNbr": 998,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2018-11-08T10:40:21Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "564b2568_2c87a7ae",
      "range": {
        "startLine": 998,
        "startChar": 0,
        "endLine": 998,
        "endChar": 38
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ef3ab6ed_839d57a3",
        "filename": "public/domain.te",
        "patchSetId": 8
      },
      "lineNbr": 1460,
      "author": {
        "id": 1124693
      },
      "writtenOn": "2018-11-07T23:49:07Z",
      "side": 1,
      "message": "Put this in heapprofd.te with the rest of heapprofd neverallows.",
      "range": {
        "startLine": 1458,
        "startChar": 0,
        "endLine": 1460,
        "endChar": 2
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b9a10be_a7d283b8",
        "filename": "public/domain.te",
        "patchSetId": 8
      },
      "lineNbr": 1460,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2018-11-08T10:40:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef3ab6ed_839d57a3",
      "range": {
        "startLine": 1458,
        "startChar": 0,
        "endLine": 1460,
        "endChar": 2
      },
      "revId": "72669195d416cfad853374637d5232338d09e89e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}