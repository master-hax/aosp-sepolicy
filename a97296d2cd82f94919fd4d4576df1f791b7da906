{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0738f6b8_43c32c64",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-08-26T06:52:38Z",
      "side": 1,
      "message": "Can you also add 358516352?",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 14
      },
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "29aa8fb2_ef1a9c9e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 1143408
      },
      "writtenOn": "2024-08-26T11:31:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0738f6b8_43c32c64",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 14
      },
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27645894_2a30203a",
        "filename": "flagging/flagging_macros",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-08-26T00:05:49Z",
      "side": 1,
      "message": "disabled",
      "range": {
        "startLine": 33,
        "startChar": 40,
        "endLine": 33,
        "endChar": 47
      },
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9da72589_e2dd0234",
        "filename": "flagging/flagging_macros",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1143408
      },
      "writtenOn": "2024-08-26T11:39:50Z",
      "side": 1,
      "message": "Is that actually what we want? The rules should be enabled on the platform private policy until the board api level is reached. At least that is my intent for https://android-review.git.corp.google.com/c/platform/system/sepolicy/+/3229063/",
      "parentUuid": "27645894_2a30203a",
      "range": {
        "startLine": 33,
        "startChar": 40,
        "endLine": 33,
        "endChar": 47
      },
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "adca69be_33e42c92",
        "filename": "flagging/flagging_macros",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-08-27T04:10:12Z",
      "side": 1,
      "message": "yeah, this is probably not what we want. What I said \"disabled\" is based on the macro definition you wrote.\n\nAs b/358516352 my original intention was that `until_board_api` affects both public and private in the same way, contrast to starting_at_board_api which affects only public. So if we move a type `foo` from public to private, we write\n\n```\n# public/foo.te\nuntil_board_api(202504, `type foo;\u0027)\n```\n\n```\n# private/foo.te\nr_dir_file(foo, bar)\n```\n\nIf we remove a type completely, we wrte\n\n```\n# public/foo.te\nuntil_board_api(202504, `type foo;\u0027)\n```\n\n```\n# private/foo.te\nuntil_board_api(202504, `r_dir_file(foo, bar)\u0027)\n```\n\nTo do that, we\u0027ll need to add another variable, like `target_platform_private_policy`, and then use that variable in `starting_at_board_api`, like:\n\n```\ndefine(`starting_at_board_api\u0027, `ifelse(eval(target_board_api_level \u003e\u003d $1), 1, `ifelse(eval(target_platform_private_policy), true, , `$2\u0027))\u0027)\n\ndefine(`until_board_api\u0027, `ifelse(eval(target_board_api_level \u003c $1), 1, `$2\u0027)\u0027)\n```\n\nand then update `system/sepolicy/build/soong/policy.go` to assign two variables appropriately.\n\nWDYT?",
      "parentUuid": "9da72589_e2dd0234",
      "range": {
        "startLine": 33,
        "startChar": 40,
        "endLine": 33,
        "endChar": 47
      },
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1c22ddd_7e7caf84",
        "filename": "flagging/flagging_macros",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1143408
      },
      "writtenOn": "2024-08-27T08:31:11Z",
      "side": 1,
      "message": "Yes, we are on the same page for the intent of that API. I\u0027ll make the change you are suggesting.",
      "parentUuid": "adca69be_33e42c92",
      "range": {
        "startLine": 33,
        "startChar": 40,
        "endLine": 33,
        "endChar": 47
      },
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6003028_afa816b4",
        "filename": "flagging/flagging_macros",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-08-28T07:17:05Z",
      "side": 1,
      "message": "I have another suggestion which is maybe more intuitive and easier.\n\n* We\u0027ll have `starting_at_board_api` and `until_board_api` macros.\n* Both macros **will work** on everywhere (including public / **private**).\n* If we add a new type, we write ```starting_at_board_api(202504, `type foo;\u0027)``` in public and `until_board_api(202504, \\`type foo;\u0027)` in private.\n* If we remove a type, we only leave ```until_board_api(202504, `type foo;\u0027)``` in public.\n* Partners can fully customize their desired rules based on board api.",
      "parentUuid": "d1c22ddd_7e7caf84",
      "range": {
        "startLine": 33,
        "startChar": 40,
        "endLine": 33,
        "endChar": 47
      },
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b00f8e7_5f49bce5",
        "filename": "flagging/flagging_macros",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-08-28T07:18:04Z",
      "side": 1,
      "message": "@tweek@google.com WDYT?",
      "parentUuid": "e6003028_afa816b4",
      "range": {
        "startLine": 33,
        "startChar": 40,
        "endLine": 33,
        "endChar": 47
      },
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8da1a0ac_0c9899c9",
        "filename": "flagging/flagging_macros",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-08-26T00:05:49Z",
      "side": 1,
      "message": "is less than",
      "range": {
        "startLine": 34,
        "startChar": 69,
        "endLine": 35,
        "endChar": 29
      },
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "55ddb2f3_af3188a7",
        "filename": "flagging/flagging_macros",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1143408
      },
      "writtenOn": "2024-08-26T11:39:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8da1a0ac_0c9899c9",
      "range": {
        "startLine": 34,
        "startChar": 69,
        "endLine": 35,
        "endChar": 29
      },
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f18e0945_3a6c28ce",
        "filename": "flagging/flagging_macros",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1561651
      },
      "writtenOn": "2024-08-26T00:10:21Z",
      "side": 1,
      "message": "@inseob@google.com Do we also need to update the Soong build code to apply the macro to private/? (Or is it implicitly done?).",
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cf2376b8_3d648df4",
        "filename": "flagging/flagging_macros",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-08-26T01:58:39Z",
      "side": 1,
      "message": "the macro rules are also appled to private/. target_board_api_level differs.",
      "parentUuid": "f18e0945_3a6c28ce",
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "02bb177d_4d6c1137",
        "filename": "flagging/flagging_macros",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1561651
      },
      "writtenOn": "2024-08-26T02:12:00Z",
      "side": 1,
      "message": "Awesome, thanks.",
      "parentUuid": "cf2376b8_3d648df4",
      "revId": "a97296d2cd82f94919fd4d4576df1f791b7da906",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}