{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4f358787_04a98aca",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2024-06-05T12:53:07Z",
      "side": 1,
      "message": "I think this is right? But with pretty low confidence.\n\n\"Prebuilt files shouldn\u0027t be changed outside the release cycle\"\n\nBut if I don\u0027t, hidraw_device_34_0 doesn\u0027t exist.\n\nag/25095657, which introduced it, made its way into 24Q1, which is a UDC QPR in old terms.",
      "revId": "4c92582b69076b0ca0961b7375397823d0cb6225",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88f2a7b2_c7bb9c52",
        "filename": "prebuilts/api/34.0/public/device.te",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-06-07T01:16:26Z",
      "side": 1,
      "message": "I don\u0027t think we need this.",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 67,
        "endChar": 29
      },
      "revId": "4c92582b69076b0ca0961b7375397823d0cb6225",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df4baa2a_42c07682",
        "filename": "prebuilts/api/34.0/public/device.te",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2024-06-07T08:10:07Z",
      "side": 1,
      "message": "Without it the build fails, as `(expandtypeattribute (hidraw_device_34_0) true)` produces an error because `hidraw_device_34_0` doesn\u0027t exist.",
      "parentUuid": "88f2a7b2_c7bb9c52",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 67,
        "endChar": 29
      },
      "revId": "4c92582b69076b0ca0961b7375397823d0cb6225",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fed56cd8_25ce17ad",
        "filename": "prebuilts/api/34.0/public/device.te",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-06-07T10:29:43Z",
      "side": 1,
      "message": "ack, but still I\u0027m not sure if we need to touch 34.0 prebuilt. the current state is\n\n1) A 34.0 device defines hidraw_device\n2) 202404 AOSP introduces vendor_hidraw_device\n3) we want the 34.0 device to access vendor_hidraw_device as before\n\nProbably we shouldn\u0027t touch system/sepolicy at all. It\u0027s because `(typeattributeset hidraw_device_34_0 (hidraw_device vendor_hidraw_device))` probably won\u0027t do anything meaningful, if they defined hidraw_device to private sepolicy.\n\nInstead, I think partners should add these statements to their own `34.0.compat.cil` (either to system_ext or product)\n\n```\n;; give permission to vendor_hidraw_device so 34.0 devices can access /dev/hidraw as before.\n(allow vendor_hidraw_device ...)\n```\n\nWDYT?",
      "parentUuid": "df4baa2a_42c07682",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 67,
        "endChar": 29
      },
      "revId": "4c92582b69076b0ca0961b7375397823d0cb6225",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9b0c63b_2e0a29c3",
        "filename": "prebuilts/api/34.0/public/device.te",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2024-06-07T10:46:28Z",
      "side": 1,
      "message": "\u003e 1) A 34.0 device defines hidraw_device\n\u003e 2) 202404 AOSP introduces vendor_hidraw_device\n\u003e 3) we want the 34.0 device to access vendor_hidraw_device as before\n\nI don\u0027t think that\u0027s right. AIUI:\n\nhidraw_device was introduced by us in 2024Q1, which is roughly a U QPR, and thus modified the 34_0 policy. That\u0027s ag/25095657.\n\nSome vendors added vendor_hidraw_device for these devices in older versions (b/340923653#comment1). That label\u0027s never been part of system policy.\n\nWe don\u0027t want to add that to the system policy, just ensure that anything labeled with it on older vendor gets the same treatment as the new hidraw_device in newer system policy.",
      "parentUuid": "fed56cd8_25ce17ad",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 67,
        "endChar": 29
      },
      "revId": "4c92582b69076b0ca0961b7375397823d0cb6225",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9903f4a8_122b202e",
        "filename": "private/compat/33.0/33.0.ignore.cil",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2024-06-05T13:21:54Z",
      "side": 1,
      "message": "Why is this being added here?",
      "range": {
        "startLine": 89,
        "startChar": 4,
        "endLine": 89,
        "endChar": 17
      },
      "revId": "4c92582b69076b0ca0961b7375397823d0cb6225",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d47a5ad6_f573c968",
        "filename": "private/compat/33.0/33.0.ignore.cil",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2024-06-05T13:39:08Z",
      "side": 1,
      "message": "Because if I don\u0027t, the build complains. \n```\nSELinux: The following public types were found added to the policy without an entry into the compatibility mapping file(s) found in pri\nvate/compat/V.v/V.v[.ignore].cil, where V.v is the latest API level.\nhidraw_device\n```\n\nI think that\u0027s because I removed it from the 34.0.ignore.cil (since it\u0027s now in 34.0.cil), and added it to the prebuilt.",
      "parentUuid": "9903f4a8_122b202e",
      "range": {
        "startLine": 89,
        "startChar": 4,
        "endLine": 89,
        "endChar": 17
      },
      "revId": "4c92582b69076b0ca0961b7375397823d0cb6225",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}