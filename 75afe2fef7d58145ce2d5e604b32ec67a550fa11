{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "bc76a560_b8123f2b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-02-06T20:51:41Z",
      "side": 1,
      "message": "Inseob for compat mapping suggestion.",
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7493cc93_afdfe6f1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-02-06T20:52:33Z",
      "side": 1,
      "message": "Wait, nevermind. Because it\u0027s a private type, we don\u0027t have to worry about old vendor images using it! Nice.",
      "parentUuid": "bc76a560_b8123f2b",
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "249ccfd3_570a0442",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-02-06T20:53:35Z",
      "side": 1,
      "message": "Or wait - it is public/file.te - so maybe it does need a compat change. Inseob, is there a way to do this? Anything that had binderfs_logs access before should get binderfs_logs_state?",
      "parentUuid": "7493cc93_afdfe6f1",
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7cfdb58f_b28959db",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2024-02-29T17:56:25Z",
      "side": 1,
      "message": "being discussed in the other comment thread",
      "parentUuid": "249ccfd3_570a0442",
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a79176e_47320f16",
        "filename": "private/compat/34.0/34.0.ignore.cil",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-02-08T02:04:17Z",
      "side": 1,
      "message": "This is fine if `/binder_logs/state` is totally new and guaranteed to be missing for previous Android versions. If not, you may want to map `binderfs_logs_state` to `binderfs_logs` by amending `34.0/34.0.cil`.",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 41,
        "endChar": 23
      },
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4cdcc813_7d5a8c70",
        "filename": "private/compat/34.0/34.0.ignore.cil",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2024-02-08T18:37:37Z",
      "side": 1,
      "message": "That file on-device is not new, only this use of the file in AOSP is new.\n\nI looks like I don\u0027t understand how to \"map binderfs_logs_state to binderfs_logs by amending 34.0/34.0.cil.\". From some previous CLs (aosp/781036, aosp/2682786) it looks like I only need to add the new `binderfs_logs_state` to the `typeattributeset binderfs_logs_34_0`  entry in `34.0/34.0.cil` (updated in patchset 2), but it does build. Do you see the problem?\n\n```\nFAILED: out/target/product/vsoc_x86_64/obj/FAKE/treble_sepolicy_tests_29.0_intermediates/treble_sepolicy_tests_29.0\n/bin/bash -c \"(out/host/linux-x86/bin/treble_sepolicy_tests                 -b out/target/product/vsoc_x86_64/obj/ETC/base_plat_pub_policy.cil_intermediates/base_plat_pub_policy.cil -m out/target/product/vsoc_x86_64/obj/ETC/treble_sepolicy_tests_29.0_intermediates/29.0_mapping.combined.cil                 -o out/target/product/vsoc_x86_64/obj/ETC/29.0_plat_policy.cil_intermediates/29.0_plat_policy.cil ) \u0026\u0026 (touch out/target/product/vsoc_x86_64/obj/FAKE/treble_sepolicy_tests_29.0_intermediates/treble_sepolicy_tests_29.0 )\"\nSELinux: The following public types were found added to the policy without an entry into the compatibility mapping file(s) found in private/compat/V.v/V.v[.ignore].cil, where V.v is the latest API level.\nbinderfs_logs_state\n\nSee examples of how to fix this:\nhttps://android-review.googlesource.com/c/platform/system/sepolicy/+/781036\nhttps://android-review.googlesource.com/c/platform/system/sepolicy/+/852612\n```",
      "parentUuid": "3a79176e_47320f16",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 41,
        "endChar": 23
      },
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de7f85d6_25e9f8f7",
        "filename": "private/compat/34.0/34.0.ignore.cil",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2024-02-29T17:56:25Z",
      "side": 1,
      "message": "I switched this to another similar file, so the name has changed. The same problem I described above exists. And I see another similar file that is also added to the `private/compat/34.0/34.0.ignore.cil` file, `binderfs_logs_stats` here https://source.corp.google.com/h/googleplex-android/platform/superproject/main/+/main:system/sepolicy/private/compat/34.0/34.0.ignore.cil;drc\u003d067f7db593eec04398515257bfd2f94c75e80406;l\u003d41\n\nSo it looks like either that was also wrong, or adding it to the ignore file is the right thing to do?",
      "parentUuid": "4cdcc813_7d5a8c70",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 41,
        "endChar": 23
      },
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5512e20_c61b4d0b",
        "filename": "private/compat/34.0/34.0.ignore.cil",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2024-03-03T21:35:02Z",
      "side": 1,
      "message": "\u003e From some previous CLs (aosp/781036, aosp/2682786) it looks like I only need to add the new binderfs_logs_state to the typeattributeset binderfs_logs_34_0 entry in 34.0/34.0.cil (updated in patchset 2), but it does build. Do you see the problem?\n\nNot sure why patchset 2 doesn\u0027t work. There is one more example showing that it should work: aosp/2964524\n\n\u003e So it looks like either that was also wrong\n\nIMO this. But there may be no issues at all, if no old vendor blobs depend on them. Probably that\u0027s why we missed it?",
      "parentUuid": "de7f85d6_25e9f8f7",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 41,
        "endChar": 23
      },
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "816f9ef2_94d66d3c",
        "filename": "private/compat/34.0/34.0.ignore.cil",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-03-27T17:59:08Z",
      "side": 1,
      "message": "Vendor blobs won\u0027t depend on this file. Previously, these files were only used for debugging. Now, we make part of those files available, and they should only be available to ANRs.",
      "parentUuid": "b5512e20_c61b4d0b",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 41,
        "endChar": 23
      },
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1631403e_8781ab59",
        "filename": "private/compat/34.0/34.0.ignore.cil",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2024-03-27T22:04:15Z",
      "side": 1,
      "message": "Ok, sounds like no changes needed then.",
      "parentUuid": "816f9ef2_94d66d3c",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 41,
        "endChar": 23
      },
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "373baa2e_be9cd6dd",
        "filename": "private/system_server.te",
        "patchSetId": 1
      },
      "lineNbr": 1561,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-02-06T20:51:41Z",
      "side": 1,
      "message": "Everything which has this, we should also add binderfs_logs_state, so you should check everything which has binderfs_logs.",
      "range": {
        "startLine": 1561,
        "startChar": 20,
        "endLine": 1561,
        "endChar": 33
      },
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8cae42ed_08663b3d",
        "filename": "private/system_server.te",
        "patchSetId": 1
      },
      "lineNbr": 1561,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2024-02-29T17:56:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "373baa2e_be9cd6dd",
      "range": {
        "startLine": 1561,
        "startChar": 20,
        "endLine": 1561,
        "endChar": 33
      },
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c59242c_c6d09b56",
        "filename": "public/file.te",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-02-06T20:51:41Z",
      "side": 1,
      "message": "or if it is possible to change this to be an attribute, we could have \u0027type binderfs_logs_state, binderfs_type, fs_type\u0027, but that is probably way more involved",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 8,
        "endChar": 28
      },
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c8ca8c9_8064f35a",
        "filename": "public/file.te",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2024-02-29T17:56:25Z",
      "side": 1,
      "message": "What are the benefits of that? I can look into it if it makes things simpler or easier to do in the future.",
      "parentUuid": "1c59242c_c6d09b56",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 8,
        "endChar": 28
      },
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4364d2a_9266fefc",
        "filename": "public/file.te",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-03-27T21:14:38Z",
      "side": 1,
      "message": "A type can have multiple attributes, so if binderfs_logs_transactions and binderfs_logs_stats both had an attribute, we could give clients permissions to read both in one rule instead of having to copy binderfs_logs_transactions everywhere, but it\u0027s okay.",
      "parentUuid": "7c8ca8c9_8064f35a",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 8,
        "endChar": 28
      },
      "revId": "75afe2fef7d58145ce2d5e604b32ec67a550fa11",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}