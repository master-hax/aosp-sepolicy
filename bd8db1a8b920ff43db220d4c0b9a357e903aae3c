{
  "comments": [
    {
      "key": {
        "uuid": "7449f9c2_b257a829",
        "filename": "private/installd.te",
        "patchSetId": 11
      },
      "lineNbr": 25,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-01-28T21:16:53Z",
      "side": 1,
      "message": "This seems overly permissive. \"notdevfile_class_set\", defined in system/sepolicy/public/global_macros, includes normal files, symbolic links, socket files, and fifo files. Only normal files should ever be executable. It doesn\u0027t make any sense to consider socket files or fifo files executable, and symlinks here feels like something we shouldn\u0027t support.\n\nIMHO, this should just be:\n\n  allow installd app_exec_data_file:file { relabelfrom relabelto lock setattr };",
      "range": {
        "startLine": 25,
        "startChar": 34,
        "endLine": 25,
        "endChar": 54
      },
      "revId": "bd8db1a8b920ff43db220d4c0b9a357e903aae3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "374e84b3_0b98c146",
        "filename": "private/installd.te",
        "patchSetId": 11
      },
      "lineNbr": 25,
      "author": {
        "id": 1059815
      },
      "writtenOn": "2019-01-28T21:25:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7449f9c2_b257a829",
      "range": {
        "startLine": 25,
        "startChar": 34,
        "endLine": 25,
        "endChar": 54
      },
      "revId": "bd8db1a8b920ff43db220d4c0b9a357e903aae3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e2e1700_c3fbf87a",
        "filename": "private/mls",
        "patchSetId": 11
      },
      "lineNbr": 61,
      "author": {
        "id": 1059815
      },
      "writtenOn": "2019-01-28T20:31:56Z",
      "side": 1,
      "message": "Jeff, would you mind having a look at this? I had to rebase after a change which split lnk_file away from this. installd never creates links for oat files so this should do.",
      "revId": "bd8db1a8b920ff43db220d4c0b9a357e903aae3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91ab443c_2ec73a92",
        "filename": "private/mls",
        "patchSetId": 11
      },
      "lineNbr": 61,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-01-28T21:16:53Z",
      "side": 1,
      "message": "I\u0027m not sure that any of these MLS changes are needed. Exactly what error are you seeing if you don\u0027t include these MLS rules?",
      "parentUuid": "2e2e1700_c3fbf87a",
      "revId": "bd8db1a8b920ff43db220d4c0b9a357e903aae3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab9fa48d_48dbe0af",
        "filename": "private/mls",
        "patchSetId": 11
      },
      "lineNbr": 61,
      "author": {
        "id": 1059815
      },
      "writtenOn": "2019-01-28T21:25:05Z",
      "side": 1,
      "message": "That\u0027s comment #19 on the bug. I get the following when dex2oat tries to write to the fd created by installd:\n\ndex2oat : type\u003d1400 audit(0.0:83): avc: denied { read write } for path\u003d\"/data/data/com.android.frameworks.dexloggertest/app_jars/oat/arm64/copied.odex\" dev\u003d\"sda13\" ino\u003d1638984 scontext\u003du:r:dex2oat:s0 tcontext\u003du:object_r:app_exec_data_file:s0:c170,c256,c512,c768 tclass\u003dfile permissive\u003d1 app\u003dcom.android.frameworks.dexloggertest\n\nThat matches the policy I wrote, except for the categories:\nallow dex2oat app_exec_data_file:file { read write };\n\nJeff suggested addressing it here.",
      "parentUuid": "91ab443c_2ec73a92",
      "revId": "bd8db1a8b920ff43db220d4c0b9a357e903aae3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "04dcba4a_1fcedeac",
        "filename": "private/mls",
        "patchSetId": 11
      },
      "lineNbr": 61,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2019-02-05T17:53:05Z",
      "side": 1,
      "message": "Adding these mls changes does not address this denial.",
      "parentUuid": "ab9fa48d_48dbe0af",
      "revId": "bd8db1a8b920ff43db220d4c0b9a357e903aae3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6081cf6_5203864f",
        "filename": "private/seapp_contexts",
        "patchSetId": 11
      },
      "lineNbr": 124,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-01-28T21:16:53Z",
      "side": 1,
      "message": "why not be consistent and use app_exec_data_file on this line (and lines 125-126) too? On older API versions, app_data_file and app_exec_data_file are essentially equivalent.",
      "range": {
        "startLine": 124,
        "startChar": 85,
        "endLine": 124,
        "endChar": 98
      },
      "revId": "bd8db1a8b920ff43db220d4c0b9a357e903aae3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d0cf5a19_357b79c1",
        "filename": "private/seapp_contexts",
        "patchSetId": 11
      },
      "lineNbr": 124,
      "author": {
        "id": 1059815
      },
      "writtenOn": "2019-01-28T21:25:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d6081cf6_5203864f",
      "range": {
        "startLine": 124,
        "startChar": 85,
        "endLine": 124,
        "endChar": 98
      },
      "revId": "bd8db1a8b920ff43db220d4c0b9a357e903aae3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}