{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e0760612_5519b744",
        "filename": "microdroid/system/private/microdroid_payload.te",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 1139038
      },
      "writtenOn": "2024-07-18T14:00:27Z",
      "side": 1,
      "message": "Does this mean that an executable inside a zip file stored in encryptedstore could be executed by the payload via the zipfuse mount point i.e. the payload would have a path to execute dynamically loaded code?",
      "range": {
        "startLine": 70,
        "startChar": 3,
        "endLine": 70,
        "endChar": 10
      },
      "revId": "a161d3648e0a3fcd1f7d95bd972bc9c9875f7bd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "00e3fdb2_7fa10d73",
        "filename": "microdroid/system/private/microdroid_payload.te",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2024-07-18T14:08:47Z",
      "side": 1,
      "message": "yes, but that\u0027s already not prohibited even without this cl. payload can put an executable file in the encrypted store (don\u0027t ask me why one would do that though), and execute it.\n\nnote that microdroid_payload itself is in the allowlist.",
      "parentUuid": "e0760612_5519b744",
      "range": {
        "startLine": 70,
        "startChar": 3,
        "endLine": 70,
        "endChar": 10
      },
      "revId": "a161d3648e0a3fcd1f7d95bd972bc9c9875f7bd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "339e9388_aa585550",
        "filename": "microdroid/system/private/microdroid_payload.te",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 1139038
      },
      "writtenOn": "2024-07-18T18:33:19Z",
      "side": 1,
      "message": "Shikha pointer me to the neverallow preventing execution of encrypted store files. I\u0027m not sure that would propagate to the zipfuse mount?\n\nhttps://source.corp.google.com/h/android/platform/superproject/main/+/main:system/sepolicy/microdroid/system/private/domain.te",
      "parentUuid": "00e3fdb2_7fa10d73",
      "range": {
        "startLine": 70,
        "startChar": 3,
        "endLine": 70,
        "endChar": 10
      },
      "revId": "a161d3648e0a3fcd1f7d95bd972bc9c9875f7bd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "932b28a8_79304e5f",
        "filename": "microdroid/system/private/microdroid_payload.te",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2024-07-19T00:40:00Z",
      "side": 1,
      "message": "I wasn\u0027t aware of the neverallow rule. And no, it doesn\u0027t propagate to zipfuse, because from the pov of zipfuse, execution is just reading a file. So, this may be worrisome.\n\nBut this should be fine as long as the user ensure the integrity of the files in the encrypted store? (for example by using dmverity or similar)",
      "parentUuid": "339e9388_aa585550",
      "range": {
        "startLine": 70,
        "startChar": 3,
        "endLine": 70,
        "endChar": 10
      },
      "revId": "a161d3648e0a3fcd1f7d95bd972bc9c9875f7bd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}