{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6f66fdfb_a1b6d619",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2024-05-15T09:20:29Z",
      "side": 1,
      "message": "We might want to exclude this. There\u0027s certainly no need for dumpstate to write there.",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 33
      },
      "revId": "76f7261d1411d0e0a5e243b9c6f8d9d8e612b739",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9de9a0f1_3a4f3454",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1561651
      },
      "writtenOn": "2024-05-15T10:25:11Z",
      "side": 1,
      "message": "Why not? It\u0027s not strictly needed but I can see an app deciding to store the result of the bugreport in that place? (Although, I\u0027m a bit fuzzy on the different types for storage_area).\n\nI just want to avoid having to come back to that definition in a few years because now an app is dumping into another legitimate folder.",
      "parentUuid": "6f66fdfb_a1b6d619",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 33
      },
      "revId": "76f7261d1411d0e0a5e243b9c6f8d9d8e612b739",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6dd10b3_fb5adaa0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2024-05-15T10:27:02Z",
      "side": 1,
      "message": "Yeah I agree the move to app_data_file_type is a good one.\n\nAnd I suppose it\u0027s gated on the app being able to open the fd anyway, so there shouldn\u0027t be any issue.",
      "parentUuid": "9de9a0f1_3a4f3454",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 33
      },
      "revId": "76f7261d1411d0e0a5e243b9c6f8d9d8e612b739",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb21837d_c34b6979",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1954616
      },
      "writtenOn": "2024-05-15T17:28:45Z",
      "side": 1,
      "message": "Yeah I think this is fine -- `storage_area_content_file` corresponds to the data the app puts in its own storage areas, so I could see a developer deciding to dump logs there.",
      "parentUuid": "a6dd10b3_fb5adaa0",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 33
      },
      "revId": "76f7261d1411d0e0a5e243b9c6f8d9d8e612b739",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28b406c5_5b20f20b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1954616
      },
      "writtenOn": "2024-05-15T17:28:45Z",
      "side": 1,
      "message": "Do apps need to be able to modify their dump files? If so, I think you might actually want to exclude the `storage_area_app_dir` -- this corresponds to the directories in which an app\u0027s storage areas are created, and apps don\u0027t have write access to them (only `r_dir_perms`). This type should also never be assigned to files.\n\nApps also only have `rw_dir_perms` on `storage_area_dir`, no file permissions, since only directories should have this type (this corresponds to a storage area directory).",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 31,
        "endChar": 8
      },
      "revId": "76f7261d1411d0e0a5e243b9c6f8d9d8e612b739",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c1623c61_f1ca4fb3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1561651
      },
      "writtenOn": "2024-05-16T03:59:27Z",
      "side": 1,
      "message": "So this specific rule is about dumpstate being able to append to a file already opened and shared by the app. If the app is not able to open a file already, then they won\u0027t be able to do anything else with this new rule.\n\nIf we think the access is too broad: either we can explicitly name each type (I don\u0027t think this is right); or maybe some types should not have the attribute (i.e., does it make sense that `storage_area_app_dir` has the attribute `app_data_file_type`?)",
      "parentUuid": "28b406c5_5b20f20b",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 31,
        "endChar": 8
      },
      "revId": "76f7261d1411d0e0a5e243b9c6f8d9d8e612b739",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "febeaa85_56cf7ca4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2024-05-16T09:21:39Z",
      "side": 1,
      "message": "Or we could do `{  app_data_file_type -storage_area_app_dir }` couldn\u0027t we?\n\nBut TBH I think it\u0027s fine as it is. Your rule only applies to things that are files and that the app is able to open, so as you say it already doesn\u0027t have any effect on storage_area_*_dir.\n\nI think it\u0027s legit for these directories to have the attribute - app_data_file_type does apply to directories, and Ellen convinced me that it\u0027s correct for these ones - even if they are slightly unusual in their behavior.",
      "parentUuid": "c1623c61_f1ca4fb3",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 31,
        "endChar": 8
      },
      "revId": "76f7261d1411d0e0a5e243b9c6f8d9d8e612b739",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b42ed21c_d10209e0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1954616
      },
      "writtenOn": "2024-05-16T16:40:52Z",
      "side": 1,
      "message": "\u003e If the app is not able to open a file already, then they won\u0027t be able to do anything else with this new rule.\n\nOk then I agree, this rule seems fine to me too!",
      "parentUuid": "febeaa85_56cf7ca4",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 31,
        "endChar": 8
      },
      "revId": "76f7261d1411d0e0a5e243b9c6f8d9d8e612b739",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}